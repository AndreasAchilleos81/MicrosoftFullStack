# GitHub Actions with YAML Workflows

## Overview

GitHub Actions allows you to automate builds and tests by processing commands after pushing code to GitHub. This guide demonstrates how to write YAML workflows for GitHub Actions using a simple Node.js application.

## Project Setup

### Initial Project Structure

The example project includes:
- `sum.js` - A simple function that sums two numbers and returns the result
- `sum.test.js` - Test file using Jest (JavaScript Test) to verify the sum function
- Node.js environment with npm initialized

### Setup Commands

```bash
# Initialize npm project
npm init -y

# Initialize Git repository
git init

# Install Jest testing framework
npm install jest
```

## Creating the GitHub Actions Workflow

### Directory Structure

GitHub Actions requires a specific folder structure:

```
your-project/
└── .github/
    └── workflows/
        └── ci.yaml
```

Create the required directory:

```bash
mkdir .github/workflows
```

### YAML Workflow File

Create a file named `ci.yaml` in the `.github/workflows` directory:

```yaml
name: CI Pipeline

on: [push, pull_request]
  
jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v2
      
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '14'
      
      - name: Install dependencies
        run: npm install
      
      - name: Run tests
        run: npm test
```

## YAML File Breakdown

### Workflow Name
```yaml
name: CI Pipeline
```
Defines the name of your workflow (can be any descriptive name).

### Event Triggers
```yaml
on:
  push:
  pull_request:
```
Specifies when the workflow should run. This configuration triggers on:
- Any code push to the repository
- Any pull request

### Jobs Configuration
```yaml
jobs:
  build:
    runs-on: ubuntu-latest
```
- **jobs**: Container for all jobs in the workflow
- **build**: Name of the job (customizable)
- **runs-on**: Specifies the operating system (Ubuntu latest in this example)

### Workflow Steps

#### 1. Checkout Code
```yaml
- uses: actions/checkout@v2
```
Uses the checkout v2 action to pull your repository code.

#### 2. Setup Node.js
```yaml
- name: Setup Node.js
  uses: actions/setup-node@v2
  with:
    node-version: '14'
```
Configures the Node.js environment with a specific version.

#### 3. Install Dependencies
```yaml
- name: Install dependencies
  run: npm install
```
Installs all project dependencies defined in `package.json`.

#### 4. Run Tests
```yaml
- name: Run tests
  run: npm test
```
Executes the test suite using npm test command.

## Testing Locally

Before pushing to GitHub, verify your tests work locally:

```bash
npm test
```

Expected output shows test results from Jest:
```
PASS  ./sum.test.js
✓ adds 1 + 2 to equal 3
```

## Example Test File

```javascript
// sum.test.js
const sum = require('./sum');

test('adds 1 + 2 to equal 3', () => {
  expect(sum(1, 2)).toBe(3);
});
```

## Deploying the Workflow

### Commit and Push

```bash
# Add the YAML file to Git
git add .github/workflows/ci.yaml

# Commit the changes
git commit -m "Add YAML file"

# Push to GitHub
git push -u origin main
```

## Monitoring Workflows

### Viewing in GitHub

1. Navigate to your GitHub repository
2. Click on the **Actions** tab
3. You'll see your CI Pipeline listed with status indicators:
   - Green checkmark ✓ = Success
   - Red X = Failure
   - Yellow circle = In progress

### Workflow Execution

When you push code or create a pull request:
- The workflow automatically triggers (no manual intervention needed)
- GitHub runs all defined steps in sequence
- Results appear in the Actions tab
- You can click on individual workflows to see detailed logs

## Common Use Cases

GitHub Actions workflows can automate various tasks:

- **Continuous Testing** - Run test suites automatically
- **Deployment** - Publish to production websites
- **Database Operations** - Update or migrate databases
- **Code Quality Checks** - Run linters and formatters
- **Notifications** - Send alerts on build status
- **Documentation** - Generate and deploy docs

## Best Practices

1. **Test Locally First** - Always run `npm test` before pushing
2. **Descriptive Names** - Use clear names for workflows and steps
3. **Version Pinning** - Specify exact versions for actions when possible
4. **Minimal Triggers** - Only trigger workflows when necessary to save resources
5. **Error Handling** - Plan for failed builds and implement notifications

## Key Advantages

- **Automation** - Workflows run automatically on specified events
- **Consistency** - Same environment every time
- **Early Detection** - Catch issues before they reach production
- **No Manual Intervention** - Once configured, everything runs automatically
- **Visibility** - Easy monitoring through GitHub's interface

## Further Exploration

To expand your GitHub Actions knowledge:
- Explore the [GitHub Actions Marketplace](https://github.com/marketplace?type=actions)
- Review official [GitHub Actions documentation](https://docs.github.com/en/actions)
- Experiment with different trigger events
- Add additional jobs for deployment pipelines
- Implement conditional workflows based on branches or file changes