@page "/"
@using Blazored.LocalStorage
@using Blazored.SessionStorage
@inject ILocalStorageService localStorage;
@inject IJSRuntime jsRuntime;

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<button class="btn btn-primary" @onclick="@ToggleTheme">Toggle Theme</button>
<p>@theme</p>
<button class="btn btn-primary" @onclick=@ClearAll>Clear All</button>

@code {
    private string theme = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        theme = await localStorage.GetItemAsync<string>("theme") ?? "light";
        StateHasChanged();
    }

    private async Task ToggleTheme()
    {
        theme = theme == "light" ? "dark" : "light";
        await localStorage.SetItemAsStringAsync("theme", theme);
        StateHasChanged();
    }

    private async Task ClearAll()
    {
        await jsRuntime.InvokeVoidAsync("clearAllStorage");
        StateHasChanged();
    }
}