// ==========================================
// Example C# code using dotnet-env
// ==========================================

using DotNetEnv;

class Program
{
    static void Main(string[] args)
    {
        // Load multiple .env files in sequence
        // Later files override earlier files (inheritance pattern)
        Env.LoadMulti(new[] {
            ".env.base",    // Base configuration
            ".env.local"    // Local overrides
        });

        // Access the environment variables
        var apiUrl = Env.GetString("API_URL");
        var dbHost = Env.GetString("DB_HOST");
        var dbPort = Env.GetInt("DB_PORT");
        var dbConnection = Env.GetString("DB_CONNECTION_STRING");
        var fullApiEndpoint = Env.GetString("FULL_API_ENDPOINT");
        
        Console.WriteLine($"API URL: {apiUrl}");
        Console.WriteLine($"DB Host: {dbHost}");
        Console.WriteLine($"DB Port: {dbPort}");
        Console.WriteLine($"DB Connection: {dbConnection}");
        Console.WriteLine($"Full API Endpoint: {fullApiEndpoint}");

        // Alternative: Use NoClobber to prevent later files from overwriting
        // This reverses the inheritance - first value wins
        Env.NoClobber().LoadMulti(new[] {
            ".env.local",   // Local config loaded first (takes precedence)
            ".env.base"     // Base config loaded second (won't override)
        });
    }
}

// ==========================================
// .env.base file (Base configuration)
// ==========================================
/*
# Base environment configuration
# This file contains default values that can be overridden

# Simple assignments
API_VERSION=v1
API_PROTOCOL=https

# Using SET keyword (Windows cmd style)
SET API_HOST=api.example.com
set API_PORT=443

# String interpolation - referencing other variables
API_URL=$API_PROTOCOL://$API_HOST:$API_PORT

# With braces (cleaner when concatenating)
FULL_API_ENDPOINT=${API_URL}/${API_VERSION}

# Database configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=myapp_db
DB_USER=admin

# Interpolation with default values
# If DB_PASSWORD is not set, use "defaultpass"
DB_PASSWORD=${DB_PASSWORD:-defaultpass}

# Complex interpolation - building connection string
DB_CONNECTION_STRING=Host=${DB_HOST};Port=${DB_PORT};Database=${DB_NAME};Username=${DB_USER}

# Nested interpolation
APP_ENV=${ENVIRONMENT:-${DEFAULT_ENV:-development}}

# Export keyword (bash style) - equivalent to SET
export LOG_LEVEL=info
export LOG_PATH=/var/logs

# Quoted values with interpolation
API_KEY="key_${API_VERSION}_secret"
WELCOME_MSG="Welcome to ${API_HOST} running version ${API_VERSION}"

# Unquoted with inline interpolation
CACHE_KEY=app_${API_VERSION}_cache
*/

// ==========================================
// .env.local file (Local overrides)
// ==========================================
/*
# Local environment overrides
# This file inherits from .env.base and overrides specific values

# Override the API host for local development
SET API_HOST=localhost
set API_PORT=8080

# API_URL will be recalculated using the new values
# Result: http://localhost:8080 (if API_PROTOCOL stays https, we can change it)
SET API_PROTOCOL=http

# Override database for local dev
DB_HOST=localhost
DB_PORT=5433
DB_NAME=myapp_local
DB_USER=localuser
DB_PASSWORD=localpass123

# The DB_CONNECTION_STRING will use these new values automatically
# Result: Host=localhost;Port=5433;Database=myapp_local;Username=localuser

# Alternative value if ENABLE_DEBUG is set
DEBUG_MODE=${ENABLE_DEBUG:+true}

# Required value - will error if DEBUG_TOKEN not set (when needed)
# DEBUG_TOKEN=${DEBUG_TOKEN:?Debug token is required}

# Override log level for local debugging
export LOG_LEVEL=debug
SET LOG_PATH=./logs

# New variables specific to local environment
LOCAL_CACHE_PATH=./cache
MOCK_SERVICES=${API_HOST}/mock

# Interpolation using overridden base values
LOCAL_API_ENDPOINT=${API_PROTOCOL}://${API_HOST}:${API_PORT}/${API_VERSION}/test
*/

// ==========================================
// Advanced usage examples
// ==========================================
/*
// Load with options
DotNetEnv.Env.LoadMulti(new[] {
    ".env.base",
    ".env.local"
}, new LoadOptions(
    setEnvVars: true,           // Actually set the environment variables
    clobberExistingVars: true,  // Later files override earlier ones
    onlyExactPath: false        // Allow traversing parent directories
));

// Or with fluent syntax
DotNetEnv.Env
    .TraversePath()  // Look in parent directories if not found
    .LoadMulti(new[] {
        ".env.base",
        ".env.local"
    });

// Reverse inheritance - first value wins
DotNetEnv.Env
    .NoClobber()  // Don't overwrite existing values
    .LoadMulti(new[] {
        ".env.local",  // Load local first
        ".env.base"    // Base won't override
    });

// Load without setting environment variables (just parse)
var config = DotNetEnv.Env
    .NoEnvVars()
    .LoadMulti(new[] {
        ".env.base",
        ".env.local"
    })
    .ToDotEnvDictionary();

// Access parsed values from dictionary
var apiUrl = config["API_URL"];
*/